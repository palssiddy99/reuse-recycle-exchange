<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Reuse & Recycle Exchange</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>‚ôªÔ∏è Reuse & Recycle Exchange</h1>
    <input type="text" id="searchBar" placeholder="Search for items...">
    <button onclick="openCart()">üõí Cart (<span id="cartCount">0</span>)</button>
  </header>

  <main>
    <h2>Available Items</h2>
    <div id="itemsList" class="grid"></div>

    <h2>Search Results</h2>
    <div id="searchResults" class="grid"></div>
  </main>

  <!-- Cart Modal -->
  <div id="cartModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCart()">&times;</span>
      <h2>Your Cart</h2>
      <div id="cartItems"></div>
    </div>
  </div>

  <script>
    // Demo item database
    const items = [
      { id: 1, name: "Study Table", category: "Furniture" },
      { id: 2, name: "Laptop Bag", category: "Accessories" },
      { id: 3, name: "Engineering Books", category: "Books" },
      { id: 4, name: "Cycle", category: "Transport" },
      { id: 5, name: "Calculator", category: "Electronics" },
      { id: 6, name: "Chair", category: "Furniture" }
    ];

    let cart = [];

    // Display all items
    function displayItems() {
      const itemsList = document.getElementById("itemsList");
      itemsList.innerHTML = items.map(item => `
        <div class="card">
          <h3>${item.name}</h3>
          <p>${item.category}</p>
          <button onclick="addToCart(${item.id})">Add to Cart</button>
        </div>
      `).join("");
    }

    // Search function
    document.getElementById("searchBar").addEventListener("input", function() {
      const query = this.value.toLowerCase();
      const searchResults = document.getElementById("searchResults");

      if (query.trim() === "") {
        searchResults.innerHTML = "";
        return;
      }

      let matched = items.filter(item => item.name.toLowerCase().includes(query));
      
      if (matched.length === 0) {
        // Show similar items by category if no direct match
        let similar = items.filter(item => item.category.toLowerCase().includes(query));
        searchResults.innerHTML = "<h4>No exact matches. Showing similar items:</h4>" +
          similar.map(item => `
            <div class="card">
              <h3>${item.name}</h3>
              <p>${item.category}</p>
              <button onclick="addToCart(${item.id})">Add to Cart</button>
            </div>
          `).join("");
      } else {
        searchResults.innerHTML = matched.map(item => `
          <div class="card">
            <h3>${item.name}</h3>
            <p>${item.category}</p>
            <button onclick="addToCart(${item.id})">Add to Cart</button>
          </div>
        `).join("");
      }
    });

    // Add item to cart
    function addToCart(id) {
      const item = items.find(i => i.id === id);
      cart.push(item);
      updateCart();
    }

    // Remove item from cart
    function removeFromCart(index) {
      cart.splice(index, 1);
      updateCart();
    }

    // Update cart display
    function updateCart() {
      document.getElementById("cartCount").textContent = cart.length;
      const cartItems = document.getElementById("cartItems");
      if (cart.length === 0) {
        cartItems.innerHTML = "<p>Your cart is empty.</p>";
        return;
      }
      cartItems.innerHTML = cart.map((item, index) => `
        <div class="card">
          <h3>${item.name}</h3>
          <p>${item.category}</p>
          <button class="remove" onclick="removeFromCart(${index})">‚ùå Remove</button>
        </div>
      `).join("");
    }

    // Open and close modal
    function openCart() {
      document.getElementById("cartModal").style.display = "flex";
    }

    function closeCart() {
      document.getElementById("cartModal").style.display = "none";
    }

    // Close modal on outside click
    window.onclick = function(event) {
      const modal = document.getElementById("cartModal");
      if (event.target === modal) {
        closeCart();
      }
    }

    // Initial load
    displayItems();
  </script>
</body>
</html>
