<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reuse & Recycle Exchange</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- ===== NAV / HEADER ===== -->
  <header class="site-header container">
    <a class="logo" href="#">
      <span class="logo-mark" aria-hidden="true">‚ôªÔ∏è</span>
      <span class="logo-text">Reuse & Recycle</span>
    </a>

    <nav class="nav">
      <a href="#impact">Impact</a>
      <a href="#categories">Categories</a>
      <a href="#marketplace">Marketplace</a>
      <a href="#stories">Stories</a>
      <a href="#awareness">Awareness</a>
      <a href="#leaderboard">Leaderboard</a>
      <a href="#contact" class="btn btn-secondary">Contact</a>
    </nav>
    <button class="nav-toggle" aria-label="Toggle menu">‚ò∞</button>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero">
    <div class="container hero-inner">
      <div class="hero-copy">
        <h1>Reuse More.<br>Waste Less.<br>Save Our Planet</h1>
        <p class="lead">
          A community-led platform to donate, exchange, and extend the life of things ‚Äî
          saving money and cutting waste.
        </p>
        <div class="hero-actions">
          <a href="#marketplace" class="btn btn-primary">Browse Items</a>
          <a href="#donate" class="btn btn-white">Donate Now</a>
        </div>
      </div>

      <div class="hero-art" aria-hidden="true">
        <svg viewBox="0 0 240 240" class="earth">
          <defs>
            <radialGradient id="g" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#0ea35d"/>
              <stop offset="100%" stop-color="#0a7c47"/>
            </radialGradient>
          </defs>
          <circle cx="120" cy="120" r="110" fill="url(#g)"/>
          <path d="M40 120c20-40 70-60 120-50-10 25-35 30-35 45 0 20 25 15 35 40-35 20-80 20-120-35z" fill="#c9f3dd" opacity=".9"/>
        </svg>
      </div>
    </div>
  </section>

  <!-- ===== IMPACT COUNTER ===== -->
  <section id="impact" class="section container">
    <h2 class="section-title">Impact Counter</h2>
    <div class="cards3">
      <article class="stat">
        <div class="stat-icon">‚ôªÔ∏è</div>
        <div>
          <div class="stat-number" data-target="1200">0</div>
          <div class="stat-label">Items Reused</div>
        </div>
      </article>
      <article class="stat">
        <div class="stat-icon">üå±</div>
        <div>
          <div class="stat-number" data-target="800">0</div>
          <div class="stat-label">Kg Waste Saved</div>
        </div>
      </article>
      <article class="stat">
        <div class="stat-icon">üí®</div>
        <div>
          <div class="stat-number" data-target="500">0</div>
          <div class="stat-label">Kg CO‚ÇÇ Reduced</div>
        </div>
      </article>
    </div>
  </section>

  <!-- ===== CATEGORIES ===== -->
  <section id="categories" class="section container">
    <h2 class="section-title">Categories</h2>
    <div class="cat-grid">
      <button class="cat" data-filter="Books">üìö Books</button>
      <button class="cat" data-filter="Electronics">üíª Electronics</button>
      <button class="cat" data-filter="Furniture">ü™ë Furniture</button>
      <button class="cat" data-filter="Clothes">üëï Clothes</button>
      <button class="cat" data-filter="Stationery">‚úèÔ∏è Stationery</button>
    </div>
  </section>

  <!-- ===== STORIES ===== -->
  <section id="stories" class="section container">
    <h2 class="section-title">Success Stories</h2>
    <!-- carousel skipped for brevity -->
  </section>

  <!-- ===== AWARENESS HUB ===== -->
  <section id="awareness" class="section container">
    <h2 class="section-title">Awareness Hub</h2>
    <!-- blog cards skipped for brevity -->
  </section>

  <!-- ===== MARKETPLACE ===== -->
  <section id="marketplace" class="section container">
    <div class="market-head">
      <h2 class="section-title">Marketplace</h2>
      <div class="searchbar">
        <input id="searchInput" type="search" placeholder="Search items‚Ä¶" />
        <button id="clearSearch" class="btn btn-soft">‚úï</button>
      </div>
    </div>
    <div class="market-wrap">
      <aside class="filters">
        <h3>Filters</h3>
        <label><input type="checkbox" class="f-cat" value="Books"> Books</label>
        <label><input type="checkbox" class="f-cat" value="Electronics"> Electronics</label>
        <label><input type="checkbox" class="f-cat" value="Furniture"> Furniture</label>
        <label><input type="checkbox" class="f-cat" value="Clothes"> Clothes</label>
        <label><input type="checkbox" class="f-cat" value="Stationery"> Stationery</label>
      </aside>
      <!-- Items populated dynamically -->
      <div class="items" id="marketplaceItems"></div>
      <aside class="cart">
        <h3>Cart</h3>
        <ul id="cartList" class="cart-list"></ul>
        <div class="cart-empty">Your cart is empty.</div>
        <button id="checkoutBtn" class="btn btn-primary full">Proceed</button>
      </aside>
    </div>
  </section>

  <!-- ===== LEADERBOARD ===== -->
  <section id="leaderboard" class="section container">
    <h2 class="section-title">Top Contributors</h2>
    <!-- leaderboard skipped for brevity -->
  </section>

  <!-- ===== DONATE (Connected to Firebase) ===== -->
  <section id="donate" class="section container">
    <h2 class="section-title">Donate an Item</h2>
    <form id="donationForm" class="donate-form">
      <input required type="text" id="name" placeholder="Your Name *">
      <input required type="text" id="item" placeholder="Item Name *">
      <select id="category" required>
        <option value="">Select Category</option>
        <option value="Books">Books</option>
        <option value="Electronics">Electronics</option>
        <option value="Furniture">Furniture</option>
        <option value="Clothes">Clothes</option>
        <option value="Stationery">Stationery</option>
      </select>
      <textarea id="description" rows="3" placeholder="Short description"></textarea>
      <button class="btn btn-primary" type="submit">Submit Donation</button>
    </form>
  </section>

  <!-- ===== CONTACT ===== -->
  <footer id="contact" class="site-footer">
    <div class="container footer-inner">
      <div>
        <h3>Contact Us</h3>
        <p>Email: support@reuse-recycle.exchange</p>
        <p>Follow: #ReuseAndRecycle</p>
      </div>
      <form class="contact-form" onsubmit="event.preventDefault(); alert('Message sent!');">
        <input type="text" placeholder="Your name" required>
        <input type="email" placeholder="Your email" required>
        <textarea rows="3" placeholder="Your message"></textarea>
        <button class="btn btn-white">Send Message</button>
      </form>
    </div>
    <div class="container tiny">¬© <span id="yr"></span> Reuse & Recycle Exchange</div>
  </footer>

  <!-- ===== Firebase Script ===== -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCxZVLa8eLsx7kuQH1Fk4gg6xi6rXiAhFA",
      authDomain: "reuse-and-recycle.firebaseapp.com",
      projectId: "reuse-and-recycle",
      storageBucket: "reuse-and-recycle.appspot.com",
      messagingSenderId: "81703541937",
      appId: "1:81703541937:web:23a0d979c87863de0cd690"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Handle form submit
    document.getElementById("donationForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value;
      const item = document.getElementById("item").value;
      const category = document.getElementById("category").value;
      const description = document.getElementById("description").value;

      try {
        await addDoc(collection(db, "donations"), {
          name, item, category, description,
          timestamp: new Date()
        });
        alert("Donation submitted successfully!");
        document.getElementById("donationForm").reset();
        loadMarketplace();
      } catch (err) {
        console.error("Error adding document:", err);
      }
    });

    // Load donations into marketplace
    async function loadMarketplace() {
      const querySnapshot = await getDocs(collection(db, "donations"));
      let marketplace = document.getElementById("marketplaceItems");
      marketplace.innerHTML = "";
      querySnapshot.forEach((doc) => {
        const d = doc.data();
        marketplace.innerHTML += `
          <div class="item-card">
            <h3>${d.item}</h3>
            <p>Donated by: ${d.name}</p>
            <p>${d.description || ""}</p>
            <span>Category: ${d.category}</span>
          </div>
        `;
      });
    }
    loadMarketplace();
  </script>
</body>
</html>
